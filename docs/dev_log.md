# 개발 일지 (Field Test / Bugfix)

## 2026-01-29
- 리프트 감지 보강: GPS 업데이트 지연 시 바리오 기반 보조 판정으로 `OnLift` 전환(연속 3초 + 최근 10초 상승량 기준).
- 오늘 이슈 정리: 첫 런 후 리프트 탑승 구간에서 GPS 업데이트 공백으로 상태 판정이 지연되어 `riding` 유지 가능성 확인.
- 히스토리 삭제 직후 먹통/크래시 원인 분석: `flowBreakdown` 타입 캐스팅 실패(`Optional<Any>` → `FlowScoreBreakdown`)로 SIGABRT 발생.
- 해결: `flowBreakdown`/`edgeBreakdown`을 Optional로 전환하고 사용처에서 `.empty` 폴백 적용.

## 2026-01-28
- 타임라인 & 지도 고도화: 지도 경로에 타임스탬프를 매핑하여 라이딩/리프트 구간을 시각적으로 분리(실선/점선).
- 메트릭 신뢰도 개선: Flow Score 0점 버그 수정(최소 점수 보장), Chatter 감점 로직 완화, 속도 그래프 런 간 간섭 제거.

## 2026-01-27
- SwiftData 안정화: 스키마 변경 시 마이그레이션 전략 수립(Optional 필드 활용).

## 2026-01-24
- 점수 스케일 업: 변별력을 위해 100점 -> 1000점 만점으로 변경.
